(()=>{"use strict";var t,e;!function(t){t.ADD_TASK="ADD_TASK",t.REMOVE_TASK="REMOVE_TASK",t.TOGGLE_TASK="TOGGLE_TASK"}(t||(t={})),function(t){t.STORE="STORE"}(e||(e={}));let s=(({key:t,defaultValue:e})=>{const s=localStorage.getItem(t)||sessionStorage.getItem(t);return s?JSON.parse(s):e})({key:e.STORE,defaultValue:{tasks:[]}}),n=[];const a=a=>{const o=((e,s)=>{const{action:n,payload:a}=e;switch(n){case t.ADD_TASK:return Object.assign(Object.assign({},s),{tasks:[...s.tasks,a]});case t.REMOVE_TASK:return Object.assign(Object.assign({},s),{tasks:s.tasks.filter((t=>t.id!==a))});case t.TOGGLE_TASK:return Object.assign(Object.assign({},s),{tasks:s.tasks.map((t=>t.id===a?Object.assign(Object.assign({},t),{status:!t.status}):t))});default:return s}})(a,JSON.parse(JSON.stringify(s)));var i;s=o,i=o,(({key:t,value:e,session:s=!1})=>{const n=s?sessionStorage:localStorage,a=JSON.stringify(e);n.setItem(t,a)})({key:e.STORE,value:i}),n.forEach((t=>t.render()))};class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML='\n                <h1>Gestionador De Tareas</h1>\n                <div class="content">\n                    <form>\n                        <input type="text" id="add" placeholder="Escribe una tarea" required>\n                        <button type="submit" id="addButton">Add Task</button>\n                    </form>\n                </div>\n            ');const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".content");null==s||s.addEventListener("submit",(e=>{var s;e.preventDefault();const n=(null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("#add")).value,o={id:Date.now(),name:n,status:!1};var i;a((i=o,{action:t.ADD_TASK,payload:i}))}))}}var i;customElements.define("task-form",o),function(t){t.uid="uid",t.name="name",t.status="status"}(i||(i={}));class r extends HTMLElement{static get observedAttributes(){return Object.keys(i)}attributeChangedCallback(t,e,s){switch(t){case i.uid:this.uid=s?Number(s):void 0;break;case i.status:this.status=s?"true"===s:void 0;break;default:this[t]=s}this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,s;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n                <div class="container">\n                    <h1>${this.name}</h1>\n                    <button class="delete">Delete</button>\n                    <input type="checkbox" ${this.status?"checked":""} class="check">\n                </div>\n            `);const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".delete"),o=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector(".check");null==n||n.addEventListener("click",(()=>{var e;a((e=this.uid,{action:t.REMOVE_TASK,payload:e}))})),null==o||o.addEventListener("change",(()=>{var e;a((e=this.uid,{action:t.TOGGLE_TASK,payload:e}))}))}}customElements.define("task-item",r);class c extends HTMLElement{constructor(){super(),this.Items=[],this.attachShadow({mode:"open"}),s.tasks.forEach((t=>{const e=this.ownerDocument.createElement("task-item");e.setAttribute(i.uid,String(t.id)),e.setAttribute(i.name,t.name),e.setAttribute(i.status,t.status?"true":"false"),this.Items.push(e)}))}connectedCallback(){this.render()}render(){this.shadowRoot&&this.Items.forEach((t=>{var e;null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}))}}customElements.define("task-list",c);class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),n=[...n,this]}connectedCallback(){return t=this,e=void 0,n=function*(){this.render()},new((s=void 0)||(s=Promise))((function(a,o){function i(t){try{c(n.next(t))}catch(t){o(t)}}function r(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(i,r)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n                <task-form></task-form>\n                <task-list></task-list>\n            ")}}customElements.define("app-container",d)})();